.row
  .col-sm-4
    %h3 Календарь
  .col-sm-2.pull-right.top15
    = link_to "Добавить матч", new_champ_stage_game_path(@champ, @stage), class: "btn btn-primary pull-right"

-if @stage.games.any?
  = render partial: 'shared/stage_schedule', locals: {stage: @stage}
- else
  Нет матчей
  - if @stage.stage_type == 'круг'
    %h4.gray-title Генерация матчей по круговой системе:
    .row
      .col-sm-9
        1.
        = link_to "Первый круг", ring_games_generate_champ_stage_path(@champ, @stage)
      .col-sm-2.pull-right
    %hr
    .row
      .col-sm-3
        2.
        = link_to "Второй круг на основе", "#", class: 'swap-gen'
      .col-sm-3
        = select_tag "parent_stage", options_from_collection_for_select(@champ.stages, 'id', 'title'), { class: 'chosen-select' }
    %hr
  - if @stage.stage_type == 'плей-офф'
    %h4.gray-title Генерация сетки кубка:
    = form_for @stage, url: cup_games_generate_champ_stage_path(@champ, @stage), html: {class: 'form form-horizontal'} do |f|
      .row
        .col-sm-9
          .form-group
            %label.col-sm-2 Начальная стадия:
            .col-sm-4
              = select_tag :teams_count, options_for_select([['1/128', 128], ['1/64', 64], ['1/32', 32], ['1/16', 16], ['1/8', 8], ['1/4', 4], ['полуфинал', 2], ['финал', 1]], ['1/64', 64] ), { class: 'chosen-select' }
        .col-sm-2.pull-right
          = f.submit 'Сделать сетку', class: 'btn btn-success customtext'
:coffee
  $ ->
    $('.swap-gen').click (event) ->
      event.preventDefault()
      window.location.href = "#{ring_games_swap_from_stage_champ_stage_path}"+"?parent_stage="+$('#parent_stage').val()